
@{
    Layout = "~/Views/Shared/_adminLTELayout.cshtml";
    ViewBag.Title = "考核平均分";
}

<div class="box box-default">
    <div class="box-body">
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <button class="btn btn-sm btn-default" id="btnAdd">新增</button>
                <button class="btn btn-sm btn-info" id="btnEdit">编辑</button>
                <button class="btn btn-sm btn-danger" id="btnDel">删除</button>
            </div>
        </div>
    </div>
    <!-- /.box-body -->
</div>

<div class="box box-default">
    <div class="row">
        <div class="col-xs-12 col-sm-12">
            <table id="tbList" data-reorderable-columns="true" style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"></table>
        </div>
    </div>
</div>

<div class="modal fade" id="modal-default">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title">温馨提示</h4>
            </div>
            <div class="modal-body">
                <p id="modal-message">111111111</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default pull-left" data-dismiss="modal">关闭</button>
                <button id="btnModalOk" type="button" class="btn btn-primary">确定</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>


@section scripts
{
    <script>

        $(function () {

            $("#btnAdd").click(function () {
                layer.open({
                    type: 2,
                    title: "录入考核平均分",
                    skin: 'layui-layer-lan',
                    maxmin: true,
                    shade: 0.1,
                    area: ['70%', '60%'], //宽高
                    content: "/EvaluateAverageScores/EvaluateAverageScoreForm"
                });

            });

            $("#btnEdit").click(function () {
                $("#modal-default").modal("show");
            });

            $("#btnDel").click(function () {
                $("#modal-default").modal("show");
            });


            //1.初始化Table
            var oTable = new TableInit();
            oTable.Init();

        });

        var TableInit = function () {
            var oTableInit = new Object();
            //初始化Table
            oTableInit.Init = function () {
                $('#tbList').bootstrapTable({
                    url: '/EvaluateAverageScores/page',         //请求后台的URL（*）
                    method: 'get',                      //请求方式（*）
                    striped: true,                      //是否显示行间隔色
                    cache: false,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
                    pagination: true,                   //是否显示分页（*）
                    sortable: false,                     //是否启用排序
                    sortOrder: "asc",                   //排序方式
                    queryParams: oTableInit.queryParams,//传递参数（*）
                    sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）
                    pageNumber: 1,                       //初始化加载第一页，默认第一页
                    pageSize: 10,                       //每页的记录行数（*）
                    pageList: [10, 25, 50, 100],        //可供选择的每页的行数（*）
                    minimumCountColumns: 2,             //最少允许的列数
                    clickToSelect: true,                //是否启用点击选中行
                    height: 670,                        //行高，如果没有设置height属性，表格自动根据记录条数觉得表格高度
                    //uniqueId: "ID",                     //每一行的唯一标识，一般为主键列
                    cardView: false,                    //是否显示详细视图
                    detailView: false,                   //是否显示父子表
                    columns: [{
                        checkbox: true
                    },{
                        field: 'UserName',
                        title: '姓名'
                    }, {
                        field: 'DeptName',
                        title: '部门'
                    }, {
                        field: 'EvaluateMonth',
                        title: '月份'
                    },  
                    {
                        field: 'Score',
                        title: '分数'
                    }, {
                        field: 'Created',
                        title: '创建时间'
                    }]
                });
            };

            //得到查询的参数
            oTableInit.queryParams = function (params) {
                var temp = {   //这里的键的名字和控制器的变量名必须一直，这边改动，控制器也需要改成一样的
                    limit: params.limit,   //页面大小
                    offset: params.offset,  //页码
                };
                return temp;
            };
            return oTableInit;
        };

    </script>

}